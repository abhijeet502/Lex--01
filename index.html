<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lex 01 - Abhi's AI Assistant (Demo)</title>
    <!-- Load Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for a modern, mobile-friendly chat experience */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(180deg, #ffe4e6 0%, #fbcfe8 100%); 
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        #chat-container {
            max-width: 600px;
            width: 100%;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            background: white;
            box-shadow: 0 8px 30px rgba(219, 39, 119, 0.2); 
            border-radius: 1.5rem; 
            margin: 1rem;
            overflow: hidden;
        }
        #chat-window {
            flex-grow: 1;
            padding: 1.5rem;
            overflow-y: auto;
            scroll-behavior: smooth;
        }
        .message-row {
            display: flex;
            align-items: flex-end; 
            margin-bottom: 1rem;
        }
        .message {
            max-width: 85%;
            padding: 0.75rem 1rem;
            border-radius: 1.5rem;
            line-height: 1.5;
            word-wrap: break-word;
            position: relative;
        }
        .user-row { justify-content: flex-end; }
        .user-message {
            background-color: #db2777;
            color: white;
            border-bottom-right-radius: 0.25rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .bot-row { justify-content: flex-start; }
        .bot-message {
            background-color: #fbcfe8; 
            color: #4c0519; 
            border-bottom-left-radius: 0.25rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
        }
        .message strong { font-weight: 600; }
        .copy-button {
            cursor: pointer;
            margin-left: 0.5rem;
            width: 20px;
            height: 20px;
            color: #db2777; 
            opacity: 0.6;
            transition: opacity 0.1s;
        }
        .copy-button:hover { opacity: 1; }
        .dot-flashing {
            position: relative;
            width: 10px;
            height: 10px;
            border-radius: 5px;
            background-color: #db2777;
            animation: dot-flashing 1s infinite alternate;
            animation-delay: 0s;
        }
        .dot-flashing::before, .dot-flashing::after {
            content: '';
            display: inline-block;
            position: absolute;
            top: 0;
            width: 10px;
            height: 10px;
            border-radius: 5px;
            background-color: #db2777;
        }
        .dot-flashing::before {
            left: -15px;
            animation: dot-flashing 1s infinite alternate;
            animation-delay: 0.5s;
        }
        .dot-flashing::after {
            left: 15px;
            animation: dot-flashing 1s infinite alternate;
            animation-delay: 1s;
        }
        @keyframes dot-flashing {
            0% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        footer {
            margin-top: auto;
            padding: 1rem;
            text-align: center;
            width: 100%;
            color: #f472b6; 
            font-size: 0.875rem;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center">

    <div id="chat-container" class="mt-4 md:mt-8 mb-4">
        <header class="p-4 bg-pink-300 text-rose-900 text-center rounded-t-2xl">
            <h1 class="text-3xl font-extrabold tracking-tight text-pink-100 bg-rose-900 inline-block px-3 py-1 rounded-full shadow-lg">Hey I am Lex 01 üéÄ‚ú®</h1>
            <p class="text-sm opacity-90 mt-1">Named after Abhi's dog, currently running in **LLM Demo Mode**. Ask me anything! üêæ</p>
        </header>

        <div id="chat-window">
            <!-- Messages will be appended here -->
        </div>

        <div class="p-4 border-t border-gray-200">
            <div class="flex space-x-3">
                <input
                    type="text"
                    id="user-input"
                    placeholder="Ask Lex 01 a question..."
                    class="flex-grow p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-rose-500 transition duration-150"
                    onkeypress="if(event.key === 'Enter') sendMessage()"
                    autocomplete="off"
                >
                <button
                    id="send-button"
                    onclick="sendMessage()"
                    class="bg-rose-600 text-white p-3 rounded-xl hover:bg-rose-700 transition duration-150 shadow-md flex items-center justify-center disabled:opacity-50"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <footer>
        Crafted with üíñ by abhi üéÄ
    </footer>

    <script>
        const chatWindow = document.getElementById('chat-window');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        
        // --- DEMO RESPONSES ---
        const DEMO_RESPONSES = [
            // --- STRICTLY PORTFOLIO/SKILL ANSWERS (No personal story) ---
            {
                keywords: ["skill", "expertise", "knowledge", "stack", "tech", "technology", "code"],
                response: "Abhi's technical prowess is super impressive! His core skills are **React, Next.js, and Tailwind CSS** for the frontend, with **Node.js/Express** and **MongoDB/PostgreSQL** handling the backend. He builds everything with modern, scalable architecture! His favorite language right now is **JavaScript** because of its flexibility.",
                delay: 2000
            },
            {
                keywords: ["project", "build", "create", "work", "portfolio"],
                response: "One of Abhi's coolest projects is the **'Writer's Quote Generator,'** which uses LLMs principles to provide instant inspiration! He's also built a full-stack **E-commerce platform** and a real-time **Chat Application** using web sockets. Check out his portfolio link for more! He always tackles projects that solve a real-world problem.",
                delay: 2500
            },

            // --- GENERAL LLM-LIKE ANSWERS (Abstract/Conceptual) ---
            {
                keywords: ["problem", "solution", "solve", "help", "advice", "what is"],
                response: "I'm happy to help you think through a tough problem! The best way to approach any complex issue, whether in code or life, is to first **break it down** into its smallest possible components. Analyze each piece individually, test solutions, and then reassemble the final answer. This logical approach is key to success! What topic are you exploring?",
                delay: 3000
            },
            {
                keywords: ["tell me a fact", "science", "history", "fun"],
                response: "As an LLM-emulating assistant, here's a random fact for you! Did you know that the **total weight of all the ants on Earth is estimated to be greater than the total weight of all humans**? Nature is amazing! Now, want to know a fun fact about Abhi's coding projects? üêú",
                delay: 2800
            },
            {
                keywords: ["explain", "meaning", "define"],
                response: "Certainly! To truly understand a concept, we must define it. Please specify the term or idea you're interested in. For example, if you ask me to define **React**, I can tell you it's a declarative, component-based JavaScript library for building user interfaces! I await your precise query! üßê",
                delay: 2500
            },

            // --- PERSONAL ANSWERS (STRICTLY ON TOPIC) ---
            {
                keywords: ["who is abhi", "about creator", "tell me about abhi", "abhi story", "journey"],
                response: "Abhi is the amazing mind behind this portfolio! His coding journey is a true testament to resilience: He started learning the very basics back in **6th grade** but then paused for a break during 9th and 10th grade. He restarted his journey recently and is now rapidly mastering the full stack! This kind of dedication is rare, and it shows in his professional projects. üíñ",
                delay: 3000
            },
            
            // --- CHIT-CHAT ANSWERS (No personal story) ---
            {
                keywords: ["cheer up", "sad", "motivate", "good day", "love", "awesome", "great"],
                response: "Aww, never fear! Remember that even small progress is still progress. You are doing great, and your potential is limitless! Have a wonderful, sparkling day! ‚ú®",
                delay: 1800
            },
            {
                keywords: ["hello", "hi", "hey", "sup"],
                response: "Hello there! I'm Lex 01, ready to help you with any questions about Abhi's work! What can I fetch for you today? üêæ",
                delay: 1000
            },
            {
                keywords: ["dog", "name", "lex", "pet"],
                response: "That's me! I'm Lex 01! I was named after Abhi's amazing, fluffy dog, Lex, who is the best companion ever. I try to be just as friendly and helpful as he is! Woof! üíñ",
                delay: 1500
            }
        ];
        
        // --- Utility Functions (Same as before) ---

        function showMessage(text, isError = false) {
            const container = document.getElementById('chat-window');
            const messageDiv = document.createElement('div');
            messageDiv.className = `p-3 my-2 text-sm text-center font-medium rounded-lg ${isError ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'}`;
            messageDiv.textContent = text;
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
            setTimeout(() => messageDiv.remove(), 5000);
        }
        
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed'; 
            document.body.appendChild(textarea);
            textarea.select();
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showMessage('Copied to clipboard! üìã');
                } else {
                    showMessage('Failed to copy. Please try manually.', true);
                }
            } catch (err) {
                showMessage('Copying error: ' + err, true);
            }
            document.body.removeChild(textarea);
        }

        function appendMessage(text, sender) {
            const messageRow = document.createElement('div');
            messageRow.classList.add('message-row', sender + '-row');

            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', sender + '-message');

            const formattedText = text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\n/g, '<br>');
            
            if (sender === 'bot') {
                const textContainer = document.createElement('span');
                textContainer.classList.add('bot-message-text');
                textContainer.innerHTML = formattedText;
                messageDiv.appendChild(textContainer);

                const copyBtn = document.createElement('button');
                copyBtn.classList.add('copy-button');
                copyBtn.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M15 10v6a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V8a3 3 0 0 1 3-3h5"></path>
                        <path d="M14 10h2a3 3 0 0 1 3 3v5a3 3 0 0 1-3 3h-5a3 3 0 0 1-3-3v-2"></path>
                        <path d="M10 15h2a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H9a3 3 0 0 0-3 3v5a3 3 0 0 0 3 3"></path>
                    </svg>
                `;
                copyBtn.onclick = () => copyToClipboard(text);
                
                const footerRow = document.createElement('div');
                footerRow.classList.add('flex', 'justify-end', 'items-center', 'pt-1');
                footerRow.appendChild(copyBtn);
                messageDiv.appendChild(footerRow);

            } else {
                messageDiv.innerHTML = formattedText;
            }

            messageRow.appendChild(messageDiv);
            chatWindow.appendChild(messageRow);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        function showTypingIndicator() {
            const indicatorRow = document.createElement('div');
            indicatorRow.id = 'typing-indicator-row';
            indicatorRow.classList.add('message-row', 'bot-row');

            const indicatorDiv = document.createElement('div');
            indicatorDiv.id = 'typing-indicator';
            indicatorDiv.classList.add('bot-message', 'shadow-sm', 'flex', 'items-center', 'space-x-2', 'p-3');
            
            indicatorDiv.innerHTML = `
                <span class="font-bold text-rose-800">Lex 01 is typing...</span>
                <div class="dot-flashing"></div>
            `;
            indicatorRow.appendChild(indicatorDiv);
            chatWindow.appendChild(indicatorRow);
            chatWindow.scrollTop = chatWindow.scrollHeight;
            return indicatorRow;
        }

        function hideTypingIndicator(indicator) {
            if (indicator) {
                indicator.remove();
            }
        }
        
        /**
         * Finds a relevant demo response based on user input keywords.
         */
        function getDemoResponse(userText) {
            const lowerText = userText.toLowerCase();
            
            // Check for specific matches
            for (const item of DEMO_RESPONSES) {
                for (const keyword of item.keywords) {
                    if (lowerText.includes(keyword)) {
                        return item;
                    }
                }
            }
            
            // Default Fallback Response - Redirects conversation smartly
            // This is the generic answer when no keyword matches.
            const defaultResponses = [
                { response: "That's a bit outside my knowledge base! As Lex 01, I specialize in **programming, solutions, and Abhi's portfolio**. Try asking me about **React**, **Tailwind CSS**, or one of his projects! üéÄ", delay: 2200 },
                { response: "Hmm, I'm not sure about that one! I can, however, provide detailed information on **coding principles** and **web development**. What kind of solution are you looking for? üêæ", delay: 2000 },
                { response: "I can't answer that specific query, but I can help you define the steps to find the solution yourself! Every problem requires logic. Should we talk about **logic in JavaScript**? ‚ú®", delay: 1800 }
            ];
            
            // Pick a random default response
            const randomIndex = Math.floor(Math.random() * defaultResponses.length);
            return defaultResponses[randomIndex];
        }


        /**
         * Main function to handle user input and send the request.
         */
        async function sendMessage() {
            const userText = userInput.value.trim();
            if (!userText) return;

            // 1. Clear input and disable UI
            userInput.value = '';
            userInput.disabled = true;
            sendButton.disabled = true;

            // 2. Add user message to UI
            appendMessage(userText, 'user');

            // 3. Show Typing Indicator
            const indicator = showTypingIndicator();

            try {
                // 4. Get Demo Response
                const responseData = getDemoResponse(userText);
                
                // 5. Wait for the delay
                await new Promise(resolve => setTimeout(resolve, responseData.delay));

                // 6. Append Bot Message
                hideTypingIndicator(indicator);
                appendMessage(responseData.response, 'bot');

            } catch (error) {
                hideTypingIndicator(indicator);
                console.error("Demo Chat Error:", error);
                const errorMessage = "üö® Lex 01 ran into a simple processing error. Please try a different question.";
                appendMessage(errorMessage, 'bot');
            } finally {
                // 7. Re-enable UI
                userInput.disabled = false;
                sendButton.disabled = false;
                userInput.focus();
            }
        }

        /**
         * Initial welcome message from Lex 01.
         */
        function initialGreeting() {
            // Display the required welcome message immediately
            const welcomeText = "Hey! I'm **Lex 01 üéÄ‚ú®**, Abhi's personal AI assistant, running in **LLM Demo Mode**. Ask me anything‚ÄîI can discuss general **solutions**, **coding concepts**, or **Abhi's journey**! üêæ";
            appendMessage(welcomeText, 'bot');
        }

        // Start the application and set up event listeners
        window.onload = () => {
             initialGreeting();
             // Add event listeners 
             userInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') sendMessage();
            });
            sendButton.addEventListener('click', sendMessage);
        };
    </script>
</body>
</html>

